<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluación Técnica de Túneles: TBM vs PyV</title>
    
    <!-- Estilos: Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React y ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel para interpretar JSX en el navegador -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        /* Animación suave para la entrada de contenido */
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- ICONOS SVG NATIVOS (Para evitar errores de librerías externas) ---
        
        const IconBase = ({ children, className }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="24" 
                height="24" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {children}
            </svg>
        );

        const Pickaxe = ({ className }) => (
            <IconBase className={className}>
                <path d="M14.5 5.5l-4 4" />
                <path d="M16 3a2.12 2.12 0 0 1 3 3L8 17l-3 3-3-3 3-3 11-11z" />
            </IconBase>
        );

        const Shield = ({ className }) => (
            <IconBase className={className}>
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
            </IconBase>
        );

        const Droplets = ({ className }) => (
            <IconBase className={className}>
                <path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.8-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z" />
                <path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.35" />
            </IconBase>
        );

        const CheckCircle = ({ className }) => (
            <IconBase className={className}>
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                <polyline points="22 4 12 14.01 9 11.01" />
            </IconBase>
        );

        const AlertTriangle = ({ className }) => (
            <IconBase className={className}>
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
                <line x1="12" y1="9" x2="12" y2="13" />
                <line x1="12" y1="17" x2="12.01" y2="17" />
            </IconBase>
        );

        const Clock = ({ className }) => (
            <IconBase className={className}>
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 6 12 12 16 14" />
            </IconBase>
        );
        
        const Calculator = ({ className }) => (
            <IconBase className={className}>
                <rect x="4" y="2" width="16" height="20" rx="2" />
                <line x1="8" y1="6" x2="16" y2="6" />
                <line x1="16" y1="14" x2="16" y2="14" />
                <line x1="12" y1="14" x2="12" y2="14" />
                <line x1="8" y1="14" x2="8" y2="14" />
                <line x1="16" y1="18" x2="16" y2="18" />
                <line x1="12" y1="18" x2="12" y2="18" />
                <line x1="8" y1="18" x2="8" y2="18" />
            </IconBase>
        );

        const Ruler = ({ className }) => (
            <IconBase className={className}>
                <path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0l12.6 12.6z" />
                <line x1="14.5" y1="9.4" x2="12.5" y2="11.3" />
                <line x1="8.5" y1="15.4" x2="6.5" y2="17.3" />
                <line x1="17.5" y1="6.4" x2="15.5" y2="8.3" />
            </IconBase>
        );
        
        const Activity = ({ className }) => (
            <IconBase className={className}>
                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />
            </IconBase>
        );
        
        const Settings = ({ className }) => (
            <IconBase className={className}>
                <circle cx="12" cy="12" r="3" />
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
            </IconBase>
        );

        // --- DATOS DEL INFORME ---

        const comparisonData = [
            {
                id: 'excavation',
                title: 'Excavación y Avance',
                icon: <Pickaxe className="w-6 h-6" />,
                description: 'La excavación define el cronograma crítico del proyecto.',
                tbm: {
                    pros: ['Avance continuo y rápido (15-30 m/día).', 'Perfil liso (menor sobre-excavación).', 'Mayor seguridad intrínseca.'],
                    cons: ['Inversión inicial masiva (CAPEX).', 'Poca flexibilidad ante fallas geológicas.', 'Tiempo de montaje largo (3-5 meses).']
                },
                pyv: {
                    pros: ['Alta flexibilidad geométrica.', 'Baja inversión inicial (equipos estándar).', 'Inicio inmediato.'],
                    cons: ['Ciclo discontinuo y lento (4-8 m/día).', 'Mayor daño al macizo (perturbación).', 'Requiere más personal en frente.']
                }
            },
            {
                id: 'support',
                title: 'Sostenimiento',
                icon: <Shield className="w-6 h-6" />,
                description: 'Garantía de estabilidad estructural y seguridad.',
                tbm: {
                    pros: ['Sostenimiento inmediato con dovelas.', 'Calidad industrial controlada.', 'Revestimiento final en un solo paso.'],
                    cons: ['Logística compleja de dovelas.', 'Costos elevados de prefabricados.']
                },
                pyv: {
                    pros: ['Sostenimiento adaptable (Shotcrete/Pernos).', 'Costo variable ajustado a la roca.'],
                    cons: ['Exposición del personal antes del sostenimiento.', 'Revestimiento final es una etapa extra.']
                }
            },
            {
                id: 'water',
                title: 'Gestión del Agua',
                icon: <Droplets className="w-6 h-6" />,
                description: 'Control de presión hidrostática y filtraciones.',
                tbm: {
                    pros: ['Modelos EPB manejan altas presiones.', 'Revestimiento estanco inmediato.'],
                    cons: ['Riesgo de atrapamiento por presión excesiva.', 'Difícil tratamiento exterior post-paso.']
                },
                pyv: {
                    pros: ['Facilidad para inyecciones previas (paraguas).', 'Instalación flexible de drenes sobre la marcha.'],
                    cons: ['Ingreso constante de agua (bombeo alto).', 'Riesgo de lavado de finos en el frente.']
                }
            }
        ];

        const scenarios = [
            {
                id: 'short',
                title: 'Escenario A: Túnel Corto (< 3km)',
                type: 'Minería / Acceso',
                bestChoice: 'Perforación y Voladura (PyV)',
                color: 'bg-orange-100 border-orange-500 text-orange-800',
                reason: 'Costos y Flexibilidad',
                desc: 'El costo de traer y montar una TBM no se amortiza en distancias cortas. PyV permite cambios de sección y galerías laterales.'
            },
            {
                id: 'long',
                title: 'Escenario B: Túnel Largo (> 6km)',
                type: 'Infraestructura / Drenaje',
                bestChoice: 'Tuneladora (TBM)',
                color: 'bg-blue-100 border-blue-500 text-blue-800',
                reason: 'Velocidad y Economía de Escala',
                desc: 'La alta velocidad de la TBM diluye los costos fijos. El perfil circular optimiza la ventilación y estabilidad a largo plazo.'
            }
        ];

        // --- COMPONENTES PRINCIPALES ---

        const CostCalculator = () => {
            const [lengthKm, setLengthKm] = useState(4);
            
            // Lógica de Costos Simplificada para la Industria
            const pyvFixed = 2; 
            const pyvVar = 5000; 
            const tbmFixed = 15; 
            const tbmVar = 2500; 

            const totalPyV = pyvFixed + (lengthKm * 1000 * pyvVar / 1000000);
            const totalTBM = tbmFixed + (lengthKm * 1000 * tbmVar / 1000000);
            
            const recommendation = totalTBM < totalPyV ? 'TBM' : 'Perforación y Voladura';
            const savings = Math.abs(totalTBM - totalPyV).toFixed(1);

            return (
                <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-200 fade-in">
                    <h3 className="text-lg font-bold text-slate-800 mb-6 flex items-center gap-2">
                        <Calculator className="text-blue-600 w-5 h-5"/> Simulador de Costos
                    </h3>

                    <div className="mb-8">
                        <label className="block text-sm font-medium text-slate-700 mb-2">
                            Longitud del Túnel: <span className="text-blue-600 font-bold text-lg">{lengthKm} km</span>
                        </label>
                        <input 
                            type="range" 
                            min="1" 
                            max="15" 
                            step="0.5" 
                            value={lengthKm} 
                            onChange={(e) => setLengthKm(parseFloat(e.target.value))}
                            className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600"
                        />
                        <div className="flex justify-between text-xs text-slate-500 mt-2 font-mono">
                            <span>1 km</span>
                            <span>5 km (Punto de Inflexión)</span>
                            <span>15 km</span>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div className={`p-4 rounded-lg border-l-4 transition-all duration-300 ${recommendation === 'Perforación y Voladura' ? 'border-orange-500 bg-orange-50' : 'border-slate-200 bg-slate-50 opacity-60'}`}>
                            <h4 className="font-bold text-slate-700 text-sm">Perforación y Voladura</h4>
                            <p className="text-2xl font-bold text-slate-800">${totalPyV.toFixed(1)} M</p>
                            <p className="text-xs text-slate-500 mt-1">Inversión Baja / Costo Variable Alto</p>
                        </div>
                        <div className={`p-4 rounded-lg border-l-4 transition-all duration-300 ${recommendation === 'TBM' ? 'border-blue-500 bg-blue-50' : 'border-slate-200 bg-slate-50 opacity-60'}`}>
                            <h4 className="font-bold text-slate-700 text-sm">TBM (Tuneladora)</h4>
                            <p className="text-2xl font-bold text-slate-800">${totalTBM.toFixed(1)} M</p>
                            <p className="text-xs text-slate-500 mt-1">Inversión Alta / Costo Variable Bajo</p>
                        </div>
                    </div>

                    <div className="bg-slate-800 text-white p-4 rounded-lg flex items-start gap-3 shadow-md">
                        <CheckCircle className="text-green-400 shrink-0 mt-1 w-5 h-5" />
                        <div>
                            <p className="font-bold">Recomendación: {recommendation}</p>
                            <p className="text-slate-300 text-sm mt-1">
                                Ahorro estimado de <span className="text-green-400 font-bold">${savings} Millones</span> seleccionando este método.
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('compare');

            return (
                <div className="min-h-screen p-4 md:p-8">
                    <div className="max-w-5xl mx-auto">
                        
                        {/* Header */}
                        <header className="mb-10 text-center fade-in">
                            <h1 className="text-3xl md:text-4xl font-extrabold text-slate-900 mb-2 tracking-tight">
                                Evaluación Técnica de Túneles
                            </h1>
                            <p className="text-slate-500 max-w-2xl mx-auto text-lg">
                                Herramienta de análisis para la selección de métodos constructivos y gestión hidrogeológica.
                            </p>
                        </header>

                        {/* Navigation */}
                        <div className="flex flex-wrap justify-center gap-2 mb-8 fade-in">
                            <button 
                                onClick={() => setActiveTab('compare')}
                                className={`px-5 py-2 rounded-full font-medium transition-all ${activeTab === 'compare' ? 'bg-blue-600 text-white shadow-lg transform scale-105' : 'bg-white text-slate-600 hover:bg-slate-100'}`}
                            >
                                Comparativa Técnica
                            </button>
                            <button 
                                onClick={() => setActiveTab('calculator')}
                                className={`px-5 py-2 rounded-full font-medium transition-all ${activeTab === 'calculator' ? 'bg-blue-600 text-white shadow-lg transform scale-105' : 'bg-white text-slate-600 hover:bg-slate-100'}`}
                            >
                                Simulador de Costos
                            </button>
                            <button 
                                onClick={() => setActiveTab('scenarios')}
                                className={`px-5 py-2 rounded-full font-medium transition-all ${activeTab === 'scenarios' ? 'bg-blue-600 text-white shadow-lg transform scale-105' : 'bg-white text-slate-600 hover:bg-slate-100'}`}
                            >
                                Escenarios & Hidrogeología
                            </button>
                        </div>

                        {/* Content */}
                        <div className="transition-all duration-300 ease-in-out">
                        
                            {/* TAB: Comparativa */}
                            {activeTab === 'compare' && (
                                <div className="space-y-4 fade-in">
                                    {comparisonData.map((item) => (
                                        <div key={item.id} className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden hover:shadow-md transition-shadow">
                                            <div className="p-6 bg-slate-50 border-b border-slate-100 flex items-center gap-4">
                                                <div className="p-3 bg-blue-100 text-blue-700 rounded-lg">
                                                    {item.icon}
                                                </div>
                                                <div>
                                                    <h3 className="text-xl font-bold text-slate-800">{item.title}</h3>
                                                    <p className="text-slate-500 text-sm">{item.description}</p>
                                                </div>
                                            </div>
                                            <div className="grid md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-slate-100">
                                                <div className="p-6">
                                                    <h4 className="font-bold text-blue-800 mb-4 flex items-center gap-2">
                                                        <Settings className="w-4 h-4"/> TBM (Mecanizado)
                                                    </h4>
                                                    <div className="space-y-4">
                                                        <div>
                                                            <span className="text-xs font-bold text-green-600 uppercase tracking-wide">Ventajas</span>
                                                            <ul className="mt-2 space-y-2">
                                                                {item.tbm.pros.map((p, i) => (
                                                                    <li key={i} className="text-sm text-slate-700 flex items-start gap-2">
                                                                        <CheckCircle className="mt-1 text-green-500 shrink-0 w-3.5 h-3.5"/> {p}
                                                                    </li>
                                                                ))}
                                                            </ul>
                                                        </div>
                                                        <div>
                                                            <span className="text-xs font-bold text-red-500 uppercase tracking-wide">Desafíos</span>
                                                            <ul className="mt-2 space-y-2">
                                                                {item.tbm.cons.map((c, i) => (
                                                                    <li key={i} className="text-sm text-slate-700 flex items-start gap-2">
                                                                        <AlertTriangle className="mt-1 text-red-400 shrink-0 w-3.5 h-3.5"/> {c}
                                                                    </li>
                                                                ))}
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="p-6 bg-orange-50/30">
                                                    <h4 className="font-bold text-orange-800 mb-4 flex items-center gap-2">
                                                        <Activity className="w-4 h-4"/> Perforación y Voladura
                                                    </h4>
                                                    <div className="space-y-4">
                                                        <div>
                                                            <span className="text-xs font-bold text-green-600 uppercase tracking-wide">Ventajas</span>
                                                            <ul className="mt-2 space-y-2">
                                                                {item.pyv.pros.map((p, i) => (
                                                                    <li key={i} className="text-sm text-slate-700 flex items-start gap-2">
                                                                        <CheckCircle className="mt-1 text-green-500 shrink-0 w-3.5 h-3.5"/> {p}
                                                                    </li>
                                                                ))}
                                                            </ul>
                                                        </div>
                                                        <div>
                                                            <span className="text-xs font-bold text-red-500 uppercase tracking-wide">Desafíos</span>
                                                            <ul className="mt-2 space-y-2">
                                                                {item.pyv.cons.map((c, i) => (
                                                                    <li key={i} className="text-sm text-slate-700 flex items-start gap-2">
                                                                        <AlertTriangle className="mt-1 text-red-400 shrink-0 w-3.5 h-3.5"/> {c}
                                                                    </li>
                                                                ))}
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            {/* TAB: Calculadora */}
                            {activeTab === 'calculator' && (
                                <div className="grid md:grid-cols-3 gap-6 fade-in">
                                    <div className="md:col-span-2">
                                        <CostCalculator />
                                    </div>
                                    <div className="space-y-4">
                                        <div className="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                                            <h4 className="font-bold text-slate-800 mb-3 flex items-center gap-2">
                                                <Clock className="text-slate-400 w-4.5 h-4.5"/> Factor Tiempo
                                            </h4>
                                            <p className="text-sm text-slate-600 leading-relaxed">
                                                Si el proyecto es urgente y corto, <strong>PyV</strong> es superior porque evita los 4-6 meses de fabricación y montaje de la TBM.
                                            </p>
                                        </div>
                                        <div className="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                                            <h4 className="font-bold text-slate-800 mb-3 flex items-center gap-2">
                                                <Ruler className="text-slate-400 w-4.5 h-4.5"/> Geometría
                                            </h4>
                                            <p className="text-sm text-slate-600 leading-relaxed">
                                                TBM obliga a una sección circular. Si el túnel requiere base plana amplia o secciones variables, PyV evita rellenos costosos.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* TAB: Escenarios */}
                            {activeTab === 'scenarios' && (
                                <div className="space-y-8 fade-in">
                                    <div className="grid md:grid-cols-2 gap-6">
                                        {scenarios.map((sc) => (
                                            <div key={sc.id} className={`p-6 rounded-xl border-2 ${sc.color} bg-white shadow-sm hover:shadow-md transition-shadow`}>
                                                <div className="flex justify-between items-start mb-4">
                                                    <span className="px-2 py-1 bg-white/80 rounded text-xs font-bold uppercase tracking-wider">{sc.type}</span>
                                                    {sc.bestChoice.includes('TBM') ? <Settings className="w-5 h-5"/> : <Pickaxe className="w-5 h-5"/>}
                                                </div>
                                                <h3 className="text-xl font-bold mb-2">{sc.title}</h3>
                                                <div className="mb-4">
                                                    <span className="text-sm font-semibold opacity-75">Mejor Elección: </span>
                                                    <span className="font-bold">{sc.bestChoice}</span>
                                                </div>
                                                <p className="text-sm opacity-90 mb-4">{sc.desc}</p>
                                                <div className="bg-white/50 p-3 rounded text-sm font-medium">
                                                    Razón: {sc.reason}
                                                </div>
                                            </div>
                                        ))}
                                    </div>

                                    <div className="bg-blue-900 text-white p-8 rounded-xl shadow-lg">
                                        <h3 className="text-2xl font-bold mb-6 flex items-center gap-3">
                                            <Droplets className="text-blue-300 w-6 h-6"/> Gestión Hidrogeológica Crítica
                                        </h3>
                                        <div className="grid md:grid-cols-3 gap-8">
                                            <div>
                                                <h4 className="font-bold text-blue-200 mb-2 border-b border-blue-700 pb-2">Drenajes</h4>
                                                <ul className="text-sm text-blue-100 space-y-2 mt-3">
                                                    <li>• <strong>Drenes Horizontales:</strong> Alivian presión detrás de muros.</li>
                                                    <li>• <strong>Pozos Verticales:</strong> Abaten el nivel freático antes de excavar.</li>
                                                    <li>• <strong>Galerías de Alivio:</strong> Túneles paralelos de desagüe.</li>
                                                </ul>
                                            </div>
                                            <div>
                                                <h4 className="font-bold text-blue-200 mb-2 border-b border-blue-700 pb-2">Inyecciones (Grouting)</h4>
                                                <ul className="text-sm text-blue-100 space-y-2 mt-3">
                                                    <li>• <strong>Cemento:</strong> Para roca dura y fisuras grandes.</li>
                                                    <li>• <strong>Resinas:</strong> Para fisuras finas (alta adherencia).</li>
                                                    <li>• <strong>Poliuretanos:</strong> Sellado reactivo con agua.</li>
                                                </ul>
                                            </div>
                                            <div className="bg-blue-800 p-4 rounded-lg">
                                                <p className="text-xs text-blue-200 italic">
                                                    "El agua a presión es la principal causa de colapso en túneles profundos. La TBM ofrece revestimiento estanco inmediato, mientras que PyV requiere gestión activa de drenaje."
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
