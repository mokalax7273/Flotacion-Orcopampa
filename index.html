<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orcopampa: Guía Técnica</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto+Mono:wght@400;500&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --primary: #0f766e;
            --primary-dark: #134e4a;
            --secondary: #2dd4bf;
            --accent-blue: #e0f2fe;
            --accent-orange: #ffedd5;
            --text: #334155;
            --bg: #f1f5f9;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Lato', sans-serif; background-color: var(--bg); color: var(--text); padding-bottom: 80px; }
        
        /* HEADER PRO */
        header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            color: white;
            padding: 35px 20px 50px 20px;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 10px 25px rgba(15, 118, 110, 0.4);
            position: relative;
            overflow: hidden;
        }
        .header-content { position: relative; z-index: 2; }
        header h1 { font-family: 'Montserrat', sans-serif; font-size: 1.8rem; letter-spacing: -0.5px; }
        header .subtitle { font-family: 'Roboto Mono', monospace; font-size: 0.85rem; color: var(--secondary); margin-top: 5px; opacity: 0.9; }
        
        /* FLOAT STATS */
        .float-stats {
            display: flex; gap: 10px; padding: 0 20px; margin-top: -30px; position: relative; z-index: 5;
            overflow-x: auto; scrollbar-width: none;
        }
        .f-stat {
            background: white; padding: 12px 15px; border-radius: 12px; min-width: 120px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08); border-left: 3px solid var(--secondary);
        }
        .f-stat h4 { font-size: 0.7rem; color: #64748b; text-transform: uppercase; font-weight: 700; }
        .f-stat p { font-size: 1.1rem; font-weight: 800; color: var(--primary); }

        /* NAV */
        .status-bar {
            background: white; margin: 20px; padding: 5px; border-radius: 50px;
            display: flex; justify-content: space-between; box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .status-item { 
            padding: 10px 20px; border-radius: 40px; color: #64748b; font-weight: 600; font-size: 0.85rem; 
            text-decoration: none; transition: 0.3s; width: 33%; text-align: center;
        }
        .status-item.active { background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(15, 118, 110, 0.3); }

        /* PROCESS TABS */
        .process-scroller { overflow-x: auto; padding: 10px 20px; display: flex; gap: 12px; scrollbar-width: none; }
        .p-tab {
            background: white; padding: 10px 16px; border-radius: 12px; font-weight: 600; font-size: 0.9rem; color: #64748b;
            border: 1px solid #e2e8f0; white-space: nowrap; transition: 0.3s; display: flex; align-items: center; gap: 8px;
        }
        .p-tab i { font-size: 0.8rem; }
        .p-tab.active { border-color: var(--primary); color: var(--primary); background: var(--accent-blue); }

        /* DETAILED CARD */
        .card-container { padding: 0 20px; margin-top: 10px; }
        .detail-card {
            background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.06);
            display: none; animation: slideUp 0.4s ease;
        }
        .detail-card.active { display: block; }
        
        .card-header { padding: 25px; background: white; border-bottom: 1px solid #f1f5f9; }
        .step-number { font-family: 'Roboto Mono', monospace; color: var(--secondary); font-size: 0.8rem; font-weight: 700; letter-spacing: 1px; }
        .card-header h2 { font-family: 'Montserrat', sans-serif; color: var(--primary-dark); font-size: 1.6rem; margin: 5px 0 10px 0; }
        .main-desc { color: #475569; line-height: 1.6; font-size: 0.95rem; }

        /* DATA GRID */
        .data-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1px; background: #f1f5f9; border-top: 1px solid #f1f5f9; }
        .data-cell { background: white; padding: 20px; }
        .data-cell h4 { font-size: 0.75rem; color: #94a3b8; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 0.5px; }
        .data-cell p { font-weight: 700; color: var(--text); font-size: 1rem; }
        .data-cell p span { font-size: 0.8rem; font-weight: 400; color: #64748b; }

        /* TECH SPECS TOGGLE */
        .tech-specs-container { background: #f8fafc; padding: 0 25px; }
        .tech-toggle {
            width: 100%; padding: 20px 0; text-align: left; background: none; border: none; 
            color: var(--primary); font-weight: 700; font-family: 'Montserrat', sans-serif;
            display: flex; justify-content: space-between; align-items: center; cursor: pointer;
        }
        .tech-details { display: none; padding-bottom: 25px; border-top: 1px solid #e2e8f0; }
        .tech-details.open { display: block; }
        
        .spec-list li { margin-bottom: 12px; font-size: 0.9rem; padding-left: 20px; position: relative; color: #475569; }
        .spec-list li::before { content: "•"; color: var(--secondary); font-weight: bold; position: absolute; left: 0; font-size: 1.2em; top: -2px; }

        /* INTERACTIVE WIDGETS */
        .widget-box { margin: 20px; background: white; border-radius: 20px; padding: 25px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); }
        .widget-header { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; color: var(--primary-dark); }
        
        /* pH Meter Visualization */
        .ph-meter { height: 10px; background: linear-gradient(to right, #ef4444, #eab308, #22c55e, #3b82f6, #a855f7); border-radius: 5px; position: relative; margin-top: 30px; }
        .ph-marker { position: absolute; top: -25px; transform: translateX(-50%); text-align: center; transition: 0.5s; }
        .ph-marker span { background: var(--primary-dark); color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; }
        .ph-marker::after { content: ''; display: block; width: 2px; height: 15px; background: var(--primary-dark); margin: 0 auto; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* DESKTOP FIX */
        @media (min-width: 768px) { body { max-width: 600px; margin: 0 auto; border-left: 1px solid #e2e8f0; border-right: 1px solid #e2e8f0; min-height: 100vh; } }
    </style>
</head>
<body>

    <header>
        <div class="header-content">
            <h1>Mina Orcopampa</h1>
            <p class="subtitle">COMPANION APP v2.0</p>
            <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.9;">Ingeniería de Minas - UCSM</p>
        </div>
    </header>

    <div class="float-stats">
        <div class="f-stat">
            <h4>Ley Au</h4>
            <p>Alta</p>
        </div>
        <div class="f-stat">
            <h4>P80</h4>
            <p>90 µm</p>
        </div>
        <div class="f-stat">
            <h4>Recup. Au</h4>
            <p>95.0%</p>
        </div>
    </div>

    <!-- Navegación Superior -->
    <div class="status-bar">
        <a href="#" onclick="showSection('proceso'); return false;" class="status-item active" id="nav-proceso">Proceso</a>
        <a href="#" onclick="showSection('kpis'); return false;" class="status-item" id="nav-kpis">KPIs</a>
        <a href="#" onclick="showSection('sostenibilidad'); return false;" class="status-item" id="nav-sostenibilidad">Ambiente</a>
    </div>

    <!-- SECCION PROCESO -->
    <div id="sec-proceso">
        <div class="process-scroller">
            <div class="p-tab active" onclick="switchCard('chancado', this)"><i class="fa-solid fa-gem"></i> Chancado</div>
            <div class="p-tab" onclick="switchCard('molienda', this)"><i class="fa-solid fa-industry"></i> Molienda</div>
            <div class="p-tab" onclick="switchCard('gravimetria', this)"><i class="fa-solid fa-magnet"></i> Gravimetría</div>
            <div class="p-tab" onclick="switchCard('cianuracion', this)"><i class="fa-solid fa-flask"></i> Cianuración</div>
            <div class="p-tab" onclick="switchCard('flotacion', this)"><i class="fa-solid fa-soap"></i> Flotación</div>
        </div>

        <div class="card-container">
            
            <!-- TARJETA 1: CHANCADO -->
            <div id="chancado" class="detail-card active">
                <div class="card-header">
                    <span class="step-number">ETAPA 01</span>
                    <h2>Conminución</h2>
                    <p class="main-desc">Reducción mecánica del mineral ROM (Run of Mine) mediante trituración en seco y lavado preliminar para eliminar arcillas perjudiciales.</p>
                </div>
                <div class="data-grid">
                    <div class="data-cell">
                        <h4>Alimentación</h4>
                        <p>12 - 18 <span>pulgadas</span></p>
                    </div>
                    <div class="data-cell">
                        <h4>Producto Final</h4>
                        <p>1.5 <span>pulgadas</span></p>
                    </div>
                </div>
                <div class="tech-specs-container">
                    <button class="tech-toggle" onclick="toggleTech(this)">Ver Detalles Técnicos <i class="fa-solid fa-chevron-down"></i></button>
                    <div class="tech-details">
                        <ul class="spec-list">
                            <li><strong>Chancado 1°:</strong> Trituradora de Mandíbulas (Jaw Crusher). Reduce a 6".</li>
                            <li><strong>Lavado:</strong> Uso de "Scrubbers" (cilindros lavadores) para retirar arcillas que consumen cianuro innecesariamente.</li>
                            <li><strong>Chancado 2°:</strong> Trituradora Cónica Standard. Reduce a 1.5" para alimentar al molino.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TARJETA 2: MOLIENDA -->
            <div id="molienda" class="detail-card">
                <div class="card-header">
                    <span class="step-number">ETAPA 02</span>
                    <h2>Molienda</h2>
                    <p class="main-desc">Circuito combinado SAG + Bolas para alcanzar la liberación de las partículas de oro encapsuladas en cuarzo.</p>
                </div>
                <div class="data-grid">
                    <div class="data-cell">
                        <h4>P80 Objetivo</h4>
                        <p>90 <span>micras</span></p>
                    </div>
                    <div class="data-cell">
                        <h4>Circuito</h4>
                        <p>Cerrado <span>con Ciclones</span></p>
                    </div>
                </div>
                <div class="tech-specs-container">
                    <button class="tech-toggle" onclick="toggleTech(this)">Ver Detalles Técnicos <i class="fa-solid fa-chevron-down"></i></button>
                    <div class="tech-details">
                        <ul class="spec-list">
                            <li><strong>Molino SAG:</strong> 15.5' x 11'. Realiza la molienda gruesa.</li>
                            <li><strong>Molino de Bolas:</strong> 12' x 16'. Refinamiento final.</li>
                            <li><strong>Clasificación:</strong> Batería de Hidrociclones D-20. El "Overflow" (finos) pasa a procesos si tiene < 106 µm.</li>
                            <li><strong>Control:</strong> Monitoreo constante de densidad de pulpa para evitar sobremolienda (generación de lamas).</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TARJETA 3: GRAVIMETRIA -->
            <div id="gravimetria" class="detail-card">
                <div class="card-header">
                    <span class="step-number">ETAPA 03</span>
                    <h2>Gravimetría</h2>
                    <p class="main-desc">Recuperación física aprovechando la alta densidad del oro frente a la ganga liviana, antes de cualquier químico.</p>
                </div>
                <div class="data-grid">
                    <div class="data-cell">
                        <h4>Tecnología</h4>
                        <p>Falcon <span>Centrífuga</span></p>
                    </div>
                    <div class="data-cell">
                        <h4>Recuperación Ag</h4>
                        <p>~9% <span>del total</span></p>
                    </div>
                </div>
                <div class="tech-specs-container">
                    <button class="tech-toggle" onclick="toggleTech(this)">Ver Detalles Técnicos <i class="fa-solid fa-chevron-down"></i></button>
                    <div class="tech-details">
                        <ul class="spec-list">
                            <li><strong>Principio:</strong> Fuerza centrífuga (hasta 60G) separa partículas pesadas.</li>
                            <li><strong>Producto:</strong> Concentrado de alta ley que va directo a Mesa Vibratoria y luego a Fundición.</li>
                            <li><strong>Ventaja:</strong> Reduce la carga de oro grueso que entra a cianuración, acelerando la cinética global.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TARJETA 4: CIANURACION -->
            <div id="cianuracion" class="detail-card">
                <div class="card-header">
                    <span class="step-number">ETAPA 04</span>
                    <h2>Cianuración Dual</h2>
                    <p class="main-desc">Proceso químico principal. Se divide la corriente en solución rica (líquido) y pulpa (sólido) para maximizar eficiencia.</p>
                </div>
                <div class="data-grid">
                    <div class="data-cell">
                        <h4>pH Operativo</h4>
                        <p>10.5 - 11.0</p>
                    </div>
                    <div class="data-cell">
                        <h4>Tiempo</h4>
                        <p>48 - 72 <span>horas</span></p>
                    </div>
                </div>
                
                <!-- pH Visualizer -->
                <div style="padding: 0 25px 25px 25px;">
                    <div class="ph-meter">
                        <div class="ph-marker" style="left: 85%;"><span>pH 11</span></div>
                    </div>
                    <p style="font-size: 0.8rem; text-align: center; margin-top: 5px; color: #94a3b8;">Rango alcalino para evitar gas HCN</p>
                </div>

                <div class="tech-specs-container">
                    <button class="tech-toggle" onclick="toggleTech(this)">Ver Detalles Técnicos <i class="fa-solid fa-chevron-down"></i></button>
                    <div class="tech-details">
                        <ul class="spec-list">
                            <li><strong>Merrill-Crowe:</strong> Procesa la solución clara rica en plata. Requiere clarificación (<5 NTU) y desoxigenación. Precipita con Polvo de Zinc.</li>
                            <li><strong>CIL (Carbón en Lixiviación):</strong> 6 Tanques agitados. El carbón activado (15 g/L) adsorbe el oro disuelto remanente ("barrido").</li>
                            <li><strong>Reactivos:</strong> Cianuro de Sodio (NaCN) y Cal (CaO) para control de pH.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TARJETA 5: FLOTACION -->
            <div id="flotacion" class="detail-card">
                <div class="card-header">
                    <span class="step-number">ETAPA 05</span>
                    <h2>Flotación Scavenger</h2>
                    <p class="main-desc">Tratamiento de los relaves (colas) del proceso CIL para recuperar sulfuros de plata refractarios.</p>
                </div>
                <div class="data-grid">
                    <div class="data-cell">
                        <h4>Tipo</h4>
                        <p>Scavenger <span>(Barrido)</span></p>
                    </div>
                    <div class="data-cell">
                        <h4>Aporte Ag</h4>
                        <p>+15% <span>Extra</span></p>
                    </div>
                </div>
                <div class="tech-specs-container">
                    <button class="tech-toggle" onclick="toggleTech(this)">Ver Detalles Técnicos <i class="fa-solid fa-chevron-down"></i></button>
                    <div class="tech-details">
                        <ul class="spec-list">
                            <li><strong>Objetivo:</strong> Recuperar sulfuros de plata encapsulados que no se disolvieron con cianuro.</li>
                            <li><strong>Reactivos:</strong> Colectores (Xantatos) para volver hidrofóbicos a los sulfuros y Espumantes.</li>
                            <li><strong>Producto:</strong> Concentrado de flotación que se comercializa aparte de las barras Doré.</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- SECCION KPI (Oculta por defecto) -->
    <div id="sec-kpis" style="display:none;">
        <div class="widget-box">
            <div class="widget-header">
                <i class="fa-solid fa-chart-line fa-lg"></i>
                <h3>Balance Metalúrgico</h3>
            </div>
            <p style="font-size: 0.9rem; color: #64748b; margin-bottom: 15px;">Contribución por proceso a la recuperación total de Plata:</p>
            
            <!-- Simple Bar Chart CSS -->
            <div style="display: flex; height: 150px; align-items: flex-end; gap: 10px; padding-bottom: 20px; border-bottom: 1px solid #e2e8f0;">
                <div style="width: 25%; background: #94a3b8; height: 12%; border-radius: 5px 5px 0 0; position: relative;">
                    <span style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 0.8rem; font-weight: bold;">9%</span>
                    <span style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 0.7rem;">Grav</span>
                </div>
                <div style="width: 25%; background: var(--secondary); height: 77%; border-radius: 5px 5px 0 0; position: relative;">
                    <span style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 0.8rem; font-weight: bold;">77%</span>
                    <span style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 0.7rem;">Cian</span>
                </div>
                <div style="width: 25%; background: var(--primary); height: 15%; border-radius: 5px 5px 0 0; position: relative;">
                    <span style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 0.8rem; font-weight: bold;">15%</span>
                    <span style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 0.7rem;">Flot</span>
                </div>
            </div>
            <p style="margin-top: 30px; font-size: 0.85rem; font-style: italic; color: #64748b;">
                *La flotación recupera lo que la cianuración no pudo disolver.
            </p>
        </div>
    </div>

    <!-- SECCION AMBIENTE (Oculta por defecto) -->
    <div id="sec-sostenibilidad" style="display:none;">
        <div class="widget-box" style="border-left: 5px solid #22c55e;">
            <div class="widget-header">
                <i class="fa-solid fa-leaf fa-lg" style="color: #22c55e;"></i>
                <h3>Destrucción de Cianuro</h3>
            </div>
            <p style="margin-bottom: 15px;">Uso de Ácido de Caro (H₂SO₅) para neutralizar efluentes.</p>
            
            <div style="background: #f0fdf4; padding: 15px; border-radius: 10px; margin-bottom: 10px;">
                <h4 style="font-size: 0.8rem; color: #15803d; margin-bottom: 5px;">ENTRADA (Relave)</h4>
                <p style="font-size: 1.2rem; font-weight: 800; color: #ef4444;">280 ppm <span style="font-size: 0.8rem; font-weight: 400; color: #64748b;">CN WAD</span></p>
            </div>
            <div style="text-align: center; color: #cbd5e1;"><i class="fa-solid fa-arrow-down"></i></div>
            <div style="background: #f0fdf4; padding: 15px; border-radius: 10px; margin-top: 10px;">
                <h4 style="font-size: 0.8rem; color: #15803d; margin-bottom: 5px;">SALIDA (Vertido)</h4>
                <p style="font-size: 1.2rem; font-weight: 800; color: #22c55e;">50 ppm <span style="font-size: 0.8rem; font-weight: 400; color: #64748b;">CN WAD</span></p>
            </div>
        </div>
    </div>

    <script>
        // Cambiar Tarjetas
        function switchCard(cardId, tab) {
            // Reset Tabs
            document.querySelectorAll('.p-tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');

            // Reset Cards
            document.querySelectorAll('.detail-card').forEach(c => c.classList.remove('active'));
            document.getElementById(cardId).classList.add('active');
        }

        // Toggle Specs
        function toggleTech(btn) {
            const details = btn.nextElementSibling;
            const isOpen = details.classList.contains('open');
            
            if (isOpen) {
                details.classList.remove('open');
                btn.innerHTML = 'Ver Detalles Técnicos <i class="fa-solid fa-chevron-down"></i>';
            } else {
                details.classList.add('open');
                btn.innerHTML = 'Ocultar Detalles <i class="fa-solid fa-chevron-up"></i>';
            }
        }

        // Navegación principal
        function showSection(sectionId) {
            // Ocultar todo
            document.getElementById('sec-proceso').style.display = 'none';
            document.getElementById('sec-kpis').style.display = 'none';
            document.getElementById('sec-sostenibilidad').style.display = 'none';
            
            // Reset Nav
            document.querySelectorAll('.status-item').forEach(i => i.classList.remove('active'));

            // Mostrar seleccinado
            document.getElementById('sec-' + sectionId).style.display = 'block';
            document.getElementById('nav-' + sectionId).classList.add('active');
        }
    </script>
</body>
</html>
